import{a as N}from"./chunk-L22CRLLV.js";import{a as L}from"./chunk-SZXMKXCP.js";import{Ea as n,Fa as p,Fb as k,Ga as h,Ha as v,J as b,Pb as T,Ub as V,V as S,Z as a,_ as m,ab as I,cb as C,da as c,db as w,ha as u,ia as _,ma as e,mb as y,na as i,oa as s,ta as E,tb as R,ua as f,vb as F,vc as A}from"./chunk-SGLRJF2H.js";function B(l,d){l&1&&(e(0,"div",5),s(1,"i",6),n(2," We are fetching the data, please wait. "),i())}function $(l,d){l&1&&(e(0,"strong",35),n(1,"Eligible"),i())}function z(l,d){l&1&&(e(0,"strong",36),n(1,"Ineligible"),i())}function G(l,d){l&1&&(e(0,"strong",36),n(1,"Ineligible"),i())}function W(l,d){l&1&&(e(0,"td",16)(1,"p",17)(2,"strong"),n(3,"Village :"),i()()())}function H(l,d){if(l&1&&(e(0,"td",18)(1,"p",17)(2,"span"),n(3),i()()()),l&2){let t=f(2);a(3),p((t.reportDetails==null?null:t.reportDetails.village_name)||"N/A")}}function Y(l,d){if(l&1&&(e(0,"tr")(1,"td",50),n(2),i(),e(3,"td",51),n(4),i(),e(5,"td",50),n(6),i(),e(7,"td",50),n(8),i()()),l&2){let t=d.$implicit,r=d.index,o=f(3);a(2),p(r+1),a(2),p(o.getDeclarationLabel(t.id)),a(2),p((t==null?null:t.status)==1?"YES":"NO"),a(2),p(t==null?null:t.reason)}}function J(l,d){l&1&&(e(0,"div",5),s(1,"i",6),n(2," We are fetching the image, please wait. "),i())}function X(l,d){if(l&1&&(e(0,"td"),s(1,"img",52),i()),l&2){let t=f(4);a(1),c("src",t.downloadUrl,S)}}function q(l,d){l&1&&(e(0,"td"),n(1," Not Available "),i())}function K(l,d){if(l&1&&u(0,X,2,1,"td")(1,q,2,0),l&2){let t=f(3);_(0,t.downloadUrl?0:1)}}function Q(l,d){if(l&1&&(e(0,"table",37)(1,"tr",38)(2,"th",39),n(3,"SN"),i(),e(4,"th",40),n(5,"Field Verification Check List"),i(),e(6,"th",39),n(7,"YES/ NO"),i(),e(8,"th",39),n(9,"Remarks"),i()(),u(10,Y,9,4,"tr",41),e(11,"tr",42),s(12,"td"),e(13,"td"),n(14," Photo of Applicant \xA0"),s(15,"i",43),i(),e(16,"td",44),n(17,"Any Other Remarks (As Specified)"),i()(),e(18,"tr",45),s(19,"td"),u(20,J,3,0,"div",4)(21,K,2,1),e(22,"td",44)(23,"div"),n(24),i(),n(25),i()(),e(26,"tr"),s(27,"td"),e(28,"td",46),n(29," Geo Location\xA0"),s(30,"i",47),i(),e(31,"td",48)(32,"div"),n(33," Field Verification Report Submitted By : "),e(34,"span",49),s(35,"br"),n(36),s(37,"br"),n(38),i()()()(),e(39,"tr"),s(40,"td"),e(41,"td")(42,"div"),n(43),i(),e(44,"div"),n(45),i()()()()),l&2){let t=f(2);a(10),c("ngForOf",t.declarationResult),a(10),_(20,t.isImageLoading?20:21),a(4),p(t.getReasonLabel(t.reportDetails==null?null:t.reportDetails.reason_id)),a(1),h(" ",t.reportDetails==null?null:t.reportDetails.remark," "),a(11),v(" ",t.reportDetails==null?null:t.reportDetails.first_name," ",t.reportDetails==null?null:t.reportDetails.last_name," "),a(2),h(" (",t.fVService.getDesignationName(t.reportDetails==null?null:t.reportDetails.designation),") "),a(5),h("Latitude : ",t.reportDetails==null?null:t.reportDetails.latitude,""),a(2),h("Longitude : ",t.reportDetails==null?null:t.reportDetails.longitude,"")}}function Z(l,d){if(l&1&&(e(0,"table",53)(1,"tr",38)(2,"th",54),n(3,"Reason (Unable to Verify)"),i(),e(4,"th",39),n(5,"Remarks(If Any)"),i()(),e(6,"tr",38)(7,"td",55),n(8),i(),e(9,"td"),n(10),i()()()),l&2){let t=f(2);a(8),p(t.getReasonLabel(t.reportDetails==null?null:t.reportDetails.reason_id)),a(2),p(t.reportDetails==null?null:t.reportDetails.remark)}}function tt(l,d){if(l&1&&(e(0,"table",56)(1,"tr")(2,"td",57),n(3," Geo Location\xA0"),s(4,"i",47),i(),e(5,"td",58)(6,"div"),n(7," Field Verification Report Submitted By : "),e(8,"span",49),s(9,"br"),n(10),s(11,"br"),n(12),i()()()(),e(13,"tr")(14,"td",57)(15,"div"),n(16),i(),e(17,"div"),n(18),i()()()()),l&2){let t=f(2);a(10),v(" ",t.reportDetails==null?null:t.reportDetails.first_name," ",t.reportDetails==null?null:t.reportDetails.last_name," "),a(2),h(" (",t.fVService.getDesignationName(t.reportDetails==null?null:t.reportDetails.designation),") "),a(4),h("Latitude : ",t.reportDetails==null?null:t.reportDetails.latitude,""),a(2),h("Longitude : ",t.reportDetails==null?null:t.reportDetails.longitude,"")}}function et(l,d){if(l&1&&(e(0,"div",7)(1,"div",8),s(2,"img",9),i(),e(3,"table",10)(4,"tbody")(5,"tr",11)(6,"td",12)(7,"p",13)(8,"strong"),n(9,"Field Verification Report "),i()()()(),e(10,"tr")(11,"td",14)(12,"p",15),n(13," \xA0 "),i()()(),e(14,"tr")(15,"td",16)(16,"p",17)(17,"strong"),n(18,"FV Ref No. :"),i()()(),e(19,"td",18)(20,"p",17)(21,"span",19),n(22),i()()(),e(23,"td",16)(24,"p",17)(25,"strong"),n(26,"Completion Date :"),i()()(),e(27,"td",18)(28,"p",17)(29,"span",19),n(30),i()()()(),e(31,"tr")(32,"td",16)(33,"p",17)(34,"strong"),n(35,"FV Officer :"),i()()(),e(36,"td",18)(37,"p",17)(38,"span",19),n(39),i()()(),e(40,"td",16)(41,"p",17)(42,"strong"),n(43,"Completion Time :"),i()()(),e(44,"td",18)(45,"p",17)(46,"span",19),n(47),i()()()(),e(48,"tr")(49,"td",20)(50,"p",17)(51,"strong"),n(52,"Assigned Date :"),i()()(),e(53,"td",21)(54,"p",17)(55,"span"),n(56),i()()(),e(57,"td",20)(58,"p",17)(59,"strong"),n(60,"FV Status : "),i()()(),e(61,"td",21)(62,"p",17)(63,"span"),u(64,$,2,0,"strong",22)(65,z,2,0,"strong",23)(66,G,2,0,"strong",23),i()()()(),e(67,"tr")(68,"td",24)(69,"p",25)(70,"strong"),n(71,"Applicant Details \xA0"),i()()(),e(72,"td",26),s(73,"p",27),i()(),e(74,"tr")(75,"td",20)(76,"p",17)(77,"strong"),n(78,"Application No : "),i()()(),e(79,"td",21)(80,"p",17)(81,"span"),n(82),i()()(),e(83,"td",20)(84,"p",17)(85,"strong"),n(86,"Aadhaar Number : "),i()()(),e(87,"td",21)(88,"p",17)(89,"span"),n(90),i()()()(),e(91,"tr")(92,"td",16)(93,"p",17)(94,"strong"),n(95,"Applicant Name : "),i()()(),e(96,"td",18)(97,"p",17)(98,"span",19),n(99),i()()(),e(100,"td",16)(101,"p",17)(102,"strong"),n(103,"Father/ Husband Name : "),i()()(),e(104,"td",18)(105,"p",17)(106,"span"),n(107),i()()()(),e(108,"tr",28)(109,"td",16)(110,"p",17)(111,"strong"),n(112,"Date of Birth : "),i()()(),e(113,"td",18)(114,"p",17)(115,"span"),n(116),i()()(),e(117,"td",20)(118,"p",17)(119,"strong"),n(120,"Mobile No : "),i()()(),e(121,"td",21)(122,"p",17)(123,"span"),n(124),i()()()(),e(125,"tr"),s(126,"td",29),i(),e(127,"tr")(128,"td",24)(129,"p",25)(130,"strong"),n(131,"Address \xA0"),i()()(),e(132,"td",26),s(133,"p",27),i()(),e(134,"tr")(135,"td",16)(136,"p",17)(137,"strong"),n(138,"District/MC :"),i()()(),e(139,"td",18)(140,"p",17)(141,"span",19),n(142),i()()(),e(143,"td",20)(144,"p",17)(145,"strong"),n(146,"Block/ULB/MC :"),i()()(),e(147,"td",21)(148,"p",17)(149,"span"),n(150),i()()()(),e(151,"tr")(152,"td",16)(153,"p",17)(154,"strong"),n(155,"GP/Ward :"),i()()(),e(156,"td",18)(157,"p",17)(158,"span"),n(159),i()()(),u(160,W,4,0,"td",30)(161,H,4,1,"td",31),i()()(),u(162,Q,46,9,"table",32)(163,Z,11,2,"table",33)(164,tt,19,5,"table",34),i()),l&2){let t=f();a(22),p(t.fVService.formatFvId(t.report_id)),a(8),p(t.appService.dateFormat(t.reportDetails==null?null:t.reportDetails.fv_status_date)),a(9),v("",t.reportDetails==null?null:t.reportDetails.first_name," ",t.reportDetails==null?null:t.reportDetails.last_name,""),a(8),p(t.appService.formatTime(t.reportDetails==null?null:t.reportDetails.created_at)),a(9),p(t.appService.dateFormat(t.reportDetails==null?null:t.reportDetails.fv_assign_date)),a(8),c("ngIf",(t.reportDetails==null?null:t.reportDetails.fv_status)=="1"),a(1),c("ngIf",(t.reportDetails==null?null:t.reportDetails.fv_status)=="0"),a(1),c("ngIf",(t.reportDetails==null?null:t.reportDetails.fv_status)=="3"),a(16),p(t.reportDetails==null?null:t.reportDetails.application_number),a(8),p(t.maskedAadhaarNumber),a(9),p(t.reportDetails==null?null:t.reportDetails.applicant_name),a(8),p(t.reportDetails==null?null:t.reportDetails.spouse_or_father_name),a(9),p(t.appService.dateFormat(t.reportDetails==null?null:t.reportDetails.dob)),a(8),p(t.reportDetails==null?null:t.reportDetails.alt_mobile_number),a(18),p(t.reportDetails==null?null:t.reportDetails.district_name),a(8),p(t.reportDetails!=null&&t.reportDetails.block_name?t.reportDetails==null?null:t.reportDetails.block_name:t.reportDetails==null?null:t.reportDetails.ulb_name),a(9),p(t.reportDetails!=null&&t.reportDetails.gp_name?t.reportDetails==null?null:t.reportDetails.gp_name:t.reportDetails==null?null:t.reportDetails.ward_no),a(1),c("ngIf",t.reportDetails==null?null:t.reportDetails.block_id),a(1),c("ngIf",t.reportDetails==null?null:t.reportDetails.block_id),a(1),c("ngIf",(t.reportDetails==null?null:t.reportDetails.fv_status)!="3"),a(1),c("ngIf",(t.reportDetails==null?null:t.reportDetails.fv_status)=="3"),a(1),c("ngIf",(t.reportDetails==null?null:t.reportDetails.fv_status)=="3")}}var ct=(()=>{let d=class d{constructor(r,o,g,x,D,O,M,j,P,U){this.fb=r,this.formService=o,this.httpClient=g,this.authService=x,this.appService=D,this.router=O,this.toastService=M,this.route=j,this.location=P,this.fVService=U,this.incompleteReasons=[{label:"Incorrect Address",remarks:"The applicant is not residing at the address provided.",id:1},{label:"Inaccessible Communication",remarks:"Despite multiple attempts, the applicant cannot be contacted.",id:2},{label:"Lack of Cooperation",remarks:"The applicant is not cooperating with the field verification process.",id:3},{label:"Documentation Issues",remarks:"The applicant is unwilling to submit the necessary documents for verification.",id:4},{label:"Safety Concerns",remarks:"There are safety issues in the area that make it unsafe to conduct the verification.",id:5},{label:"Deceased Applicant",remarks:"The applicant is deceased.",id:6},{label:"Others",remarks:"",id:7}],this.maskedAadhaarNumber="",this.isStatsLoading=!1,this.isImageLoading=!1,this.reportDetails=null,this.report_id="",this.fv_date="",this.fv_time="",this.downloadUrl="",this.declarationResult=[]}ngOnInit(){this.route.params.subscribe(r=>{let o=r.report_id;this.report_id=o,this.fetchFieldVerificationReportDetails(o)})}goBack(){this.location.back()}getDeclarationLabel(r){return this.fVService.declarations.find(o=>Number(o?.id)===Number(r))?.declaration}getReasonLabel(r){return this.incompleteReasons.find(o=>Number(o?.id)===Number(r))?.label}getReasonRemarks(r){this.incompleteReasons.find(o=>Number(o?.id)===Number(r))?.remarks}formatDate(r){let o=new Date(r);this.fv_date=r,this.fv_time=o.toLocaleTimeString()}fetchFieldVerificationReportDetails(r){let o=`/v1/fv-completed-details?fvId=${r}`;(this.authService.userDetail.role.id===6||this.authService.userDetail.role.id===8)&&(o=`/v1/completed-fv-details?fvId=${r}`),this.isStatsLoading=!0,this.httpClient.get(`${this.appService.departmentBaseUrl}${o}`,{headers:{Authorization:this.authService.authToken}}).subscribe(g=>{this.isStatsLoading=!1,this.reportDetails=g.data[0],this.formatDate(this.reportDetails.created_at),this.declarationResult=JSON.parse(this.reportDetails.declaration_ids),this.reportDetails.photo&&this.reportDetails.fv_status_date&&this.fetchImageFiled(this.reportDetails.photo,this.reportDetails.fv_status_date),this.maskAadhaarNumber()},g=>{this.isStatsLoading=!1,this.reportDetails=null})}fetchImageFiled(r,o){let g=`/v1/download-application-file?file_name=${r}&file_date=${o}`;(this.authService.userDetail.role.id===6||this.authService.userDetail.role.id===8)&&(g=`/v1/fv/download-file?file_name=${r}&file_date=${o}`),this.isImageLoading=!0,this.httpClient.get(`${this.appService.departmentBaseUrl}${g}`,{headers:{Authorization:this.authService.authToken},responseType:"blob"}).subscribe(x=>{this.isImageLoading=!1;let D=URL.createObjectURL(x);this.downloadUrl=D,setTimeout(()=>URL.revokeObjectURL(this.downloadUrl),100)},x=>{this.isImageLoading=!1,console.error("Error fetching the file",x)})}maskAadhaarNumber(){let r=this.reportDetails?.aadhaar_ref_number||"";this.maskedAadhaarNumber=r?r.slice(0,-4).replace(/./g,"X")+r.slice(-4):""}};d.\u0275fac=function(o){return new(o||d)(m(A),m(L),m(y),m(V),m(k),m(F),m(T),m(R),m(I),m(N))},d.\u0275cmp=b({type:d,selectors:[["app-field-verification-report-details"]],decls:7,vars:1,consts:[[1,"mx-2","text-end","mb-2",2,"white-space","nowrap"],["type","button",1,"me-2",3,"click"],[1,"btn","btn-dark","py-2",2,"border-radius","5px !important"],[1,"fa-solid","fa-arrow-left","me-1"],["style","max-width: 100%;margin-top: 10px;display: flex;justify-content: center;"],[2,"max-width","100%","margin-top","10px","display","flex","justify-content","center"],[1,"fa","fa-spinner","fa-spin"],[2,"width","100%","padding","10px","background-color","white"],[1,"d-flex","justify-content-center","align-items-center","w-100"],["src","../../../../../assets/images/govt-subhadra-logo-header.png",2,"width","55%","height","100px","margin","auto"],["cellspacing","0","cellpadding","1",2,"width","100%"],["align","center",2,"text-decoration","underline"],["colspan","8",2,"width","100%","padding-right","5.03pt","padding-left","5.4pt","vertical-align","middle"],[2,"margin-top","20pt","margin-bottom","0pt","text-align","center","line-height","115%","font-size","16pt"],["colspan","8",2,"width","512pt","padding-right","5.4pt","padding-left","5.4pt","vertical-align","top"],[2,"margin-top","0pt","margin-bottom","0pt","text-align","center","line-height","115%","font-size","11pt"],[2,"width","131.35pt","padding-right","5.4pt","padding-left","5.4pt","vertical-align","top"],[2,"margin-top","5pt","margin-bottom","0pt","line-height","115%","font-size","10pt"],[2,"width","96.4pt","padding-right","5.4pt","padding-left","5.4pt","vertical-align","top"],[2,"text-transform","uppercase"],[2,"width","97pt","padding-right","5.4pt","padding-left","5.4pt","vertical-align","top"],[2,"width","48.05pt","padding-right","5.4pt","padding-left","5.4pt","vertical-align","top"],["style","color: #f39c12;",4,"ngIf"],["style","color: #dd2323;",4,"ngIf"],["colspan","2",2,"width","131.35pt","padding-right","5.4pt","padding-left","5.4pt","vertical-align","top"],[2,"margin-top","13pt","margin-bottom","0pt","line-height","115%","font-size","14pt","border-bottom","1px solid #000","width","max-content","padding-bottom","6px"],["colspan","4",2,"width","263.05pt","padding-right","5.4pt","padding-left","5.4pt","vertical-align","top"],[2,"margin-top","15ptpt","margin-bottom","0pt","line-height","115%","font-size","10pt"],[2,"margin-bottom","10px"],["colspan","6",2,"width","379.9pt","padding-right","5.03pt","padding-left","5.4pt","vertical-align","middle"],["style",`
              width: 131.35pt;
              padding-right: 5.4pt;
              padding-left: 5.4pt;
              vertical-align: top;
            `,4,"ngIf"],["style",`
              width: 96.4pt;
              padding-right: 5.4pt;
              padding-left: 5.4pt;
              vertical-align: top;
            `,4,"ngIf"],["class","detailsTable","border","1","cellspacing","0","cellpadding","3","style","width: 100%;margin-top: 15px !important;",4,"ngIf"],["class","detailsTable","border","1","cellspacing","0","cellpadding","2","style","width: 100%;margin-top: 15px !important;",4,"ngIf"],["class","detailsTable","border","1","style","width: 100%;margin-top: 15px !important;",4,"ngIf"],[2,"color","#f39c12"],[2,"color","#dd2323"],["border","1","cellspacing","0","cellpadding","3",1,"detailsTable",2,"width","100%","margin-top","15px !important"],["height","50"],[2,"white-space","nowrap","text-align","center"],["colspan","2",2,"white-space","nowrap","text-align","center"],[4,"ngFor","ngForOf"],["align","center "],[1,"fa-solid","fa-camera-retro"],["colspan","3"],["align","center ","height","250"],["align","center"],[1,"fa-solid","fa-location-dot"],["colspan","3","rowspan","3",2,"vertical-align","top"],[2,"font-weight","700"],[2,"text-align","center"],["colspan","2"],[1,"hover-img",3,"src"],["border","1","cellspacing","0","cellpadding","2",1,"detailsTable",2,"width","100%","margin-top","15px !important"],[2,"white-space","nowrap","text-align","center","width","50%"],["align","center",2,"width","50%","font-weight","700"],["border","1",1,"detailsTable",2,"width","100%","margin-top","15px !important"],["align","center",2,"width","50%"],["colspan","1","rowspan","2",2,"vertical-align","top"]],template:function(o,g){o&1&&(e(0,"div",0)(1,"a",1),E("click",function(){return g.goBack()}),e(2,"button",2),s(3,"i",3),n(4," Back"),i()()(),u(5,B,3,0,"div",4)(6,et,165,23)),o&2&&(a(5),_(5,g.isStatsLoading?5:6))},dependencies:[C,w],styles:["table[_ngcontent-%COMP%]{margin:auto!important}@media print{@page{margin:0}body[_ngcontent-%COMP%]{margin:1cm}header[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]{display:none}}.detailsTable[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{border:2px solid gray}.detailsTable[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border:2px solid gray}.detailsTable[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border:2px solid gray}.hover-img[_ngcontent-%COMP%]{width:200px;height:200px;object-fit:contain;transition:transform .3s ease}.hover-img[_ngcontent-%COMP%]:hover{transform:scale(2)}"]});let l=d;return l})();export{ct as a};
